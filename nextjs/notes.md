# Complete Next.js Folder Structure Analysis - In-Depth Trace

## ğŸ“ Root Level Files

### 1. package.json

**Purpose:** Project configuration and dependency management

- Defines project metadata, scripts, and dependencies
- Uses Next.js 16.1.1 with React 19.2.3
- Includes Tailwind CSS v4 and React Compiler
- **Scripts:**
  - `npm run dev` - Start development server
  - `npm run build` - Build for production
  - `npm start` - Start production server

### 2. package-lock.json

**Purpose:** Locks exact dependency versions

- Auto-generated by npm
- Ensures consistent installations across environments
- Should be committed to version control

### 3. next.config.mjs

**Notation:** `next.config.mjs` (ESM module format)
**Purpose:** Next.js configuration file

- Enables React Compiler with `reactCompiler: true`
- Can include:
  - Environment variables
  - Redirects and rewrites
  - Image domains
  - Webpack customization
  - Custom headers

### 4. jsconfig.json

**Purpose:** JavaScript/TypeScript compiler configuration

- Sets up path aliases: `@/*` maps to root directory
- Enables absolute imports like `@/Components/Header`
- Improves code maintainability and readability

### 5. postcss.config.mjs

**Notation:** `postcss.config.mjs`
**Purpose:** PostCSS configuration for Tailwind CSS

- Configures `@tailwindcss/postcss` plugin
- Processes CSS transformations

### 6. .gitignore

**Notation:** `.gitignore` (hidden file starting with dot)
**Purpose:** Specifies files/folders Git should ignore

- **Excludes:**
  - node_modules/
  - .next/
  - .env files
  - build output
  - coverage reports

### 7. README.md

**Purpose:** Project documentation

- Standard Next.js starter documentation
- Getting started guide
- Deployment instructions

### 8. notes.txt

**Purpose:** Custom project notes

- Tip: `npm start >> server.log 2>&1` for logging output to file

---

## ğŸ“ app/ Directory - App Router Structure

The `app/` directory uses Next.js 13+ App Router with file-based routing.

### Root App Files

#### app/layout.js

**Notation:** `layout.js` (Reserved file name)
**Purpose:** Root layout component - wraps entire application

- **Must export default React component**
- **Must return `<html>` and `<body>` tags**
- Imports global CSS
- Includes ThemeProvider context
- Sets metadata template for dynamic page titles

**Key Features:**

```javascript
export const metadata = {
  title: {
    template: "%s | Technical Agency",
    default: "Technical Agency",
  },
};
```

#### app/page.js

**Notation:** `page.js` (Reserved file name)
**Purpose:** Homepage component (route: `/`)

- Default export renders the home page
- Contains navigation links
- Server Component by default

#### app/error.js

**Notation:** `error.js` (Reserved file name)
**Purpose:** Error boundary for the root route

- **Must be Client Component** (`"use client"`)
- **Receives props:**
  - `error` - Error object with details
  - `reset` - Function to retry rendering
- Catches errors in sibling/child components
- Does NOT catch errors in root layout

#### app/global-error.js

**Notation:** `global-error.js` (Reserved file name)
**Purpose:** Root-level error handler

- Catches errors in root layout
- **Must include `<html>` and `<body>` tags**
- Only active in production
- Replaces root layout when error occurs

#### app/not-found.js

**Notation:** `not-found.js` (Reserved file name)
**Purpose:** 404 page for invalid routes

- Shown when route doesn't exist
- Can be triggered programmatically with `notFound()` function
- Can be customized per route segment

#### app/globals.css

**Purpose:** Global stylesheet

- **CSS Variables for theming:**
  - Light mode: `--primary-bg`, `--text-primary`
  - Dark mode: `:root.dark` selector
- Responsive design with media queries
- Imported in root layout

#### app/page.module.css

**Notation:** `*.module.css` (CSS Modules)
**Purpose:** Scoped styles for home page

- Styles are locally scoped to prevent conflicts
- Imported as: `import styles from './page.module.css'`
- Access as: `className={styles.page}`

---

## ğŸ“ Route Groups

### Notation: `(folderName)` - Route Group

**Purpose:** Organize routes without affecting URL structure

- **Parentheses exclude folder from URL path**
- Allow separate layouts for different sections
- Example: `(application)` and `(marketing)` both serve from root `/`

**Benefits:**

- Organize routes logically
- Multiple root layouts
- Split application sections
- No impact on URLs

---

## ğŸ“ app/(application)/ - Application Section

### app/(application)/layout.js

**Purpose:** Shared layout for application routes

- Wraps `/about` and `/blogs` routes
- Adds header and footer specific to application section
- Nested inside root layout

**Layout Hierarchy:**

```
Root Layout (app/layout.js)
  â””â”€â”€ Application Layout (app/(application)/layout.js)
      â”œâ”€â”€ About Page
      â””â”€â”€ Blogs Pages
```

---

### ğŸ“ app/(application)/about/

#### app/(application)/about/page.jsx

**Notation:** Route: `/about`
**Purpose:** About page with client-side state

- **Client Component** (`"use client"`)
- Uses `useState` hook
- Demonstrates error triggering for testing
- Shows interactivity on server-first app

#### app/(application)/about/error.js

**Purpose:** Error boundary for `/about` route

- Specific error handling for about page
- More granular than root error boundary
- Custom error message: "This is main about error file running"

---

### ğŸ“ app/(application)/blogs/

#### app/(application)/blogs/page.jsx

**Notation:** Route: `/blogs`
**Purpose:** Blog listing page

- **Server Component** (default)
- **Sets metadata:**

```javascript
export const metadata = {
  title: "Blogs",
};
```

- Demonstrates **Suspense streaming** with multiple components
- Random error generation for testing error boundaries

**Suspense Pattern:**

```javascript
<Suspense fallback={"Loading Views"}>
  <Views />
</Suspense>
```

#### app/(application)/blogs/error.js

**Purpose:** Error boundary for blogs route

- Uses `router.refresh()` to reload server data
- Uses `startTransition` for smoother updates
- Demonstrates advanced error recovery

---

### ğŸ“ app/(application)/blogs/[blogId]/ - Dynamic Route

**Notation:** `[folderName]` - Dynamic Segment
**Purpose:** Creates dynamic routes with URL parameters

- `[blogId]` captures route parameter
- Accessible via `params.blogId`
- Examples: `/blogs/1`, `/blogs/2`, `/blogs/100`

#### app/(application)/blogs/[blogId]/page.jsx

**Notation:** Route: `/blogs/:blogId` (dynamic)
**Purpose:** Individual blog post page

**Key Features:**

1. **Static Site Generation (SSG):**

```javascript
export async function generateStaticParams() {
  const res = await fetch("https://jsonplaceholder.typicode.com/todos/");
  const data = await res.json();
  return data.map(({ id }) => ({ blogId: `${id}` }));
}
```

- Pre-generates pages at build time
- Returns array of objects with param keys

2. **Incremental Static Regeneration (ISR):**

```javascript
export const revalidate = 5; // in seconds
```

- Regenerates page every 5 seconds
- Keeps content fresh without full rebuilds

3. **Dynamic Parameters Control:**

```javascript
export const dynamicParams = false;
```

- `false` - Only show pre-generated pages (404 for others)
- `true` (default) - Generate pages on-demand

4. **Dynamic Metadata:**

```javascript
export async function generateMetadata({ params }) {
  const { blogId: id } = await params;
  return {
    title: `Blog ${id}`,
    description: `Read blog post ${id}`,
  };
}
```

5. **Custom 404 Logic:**

```javascript
if (!/^\d+$/.test(id)) {
  notFound(); // Triggers not-found.js
}
```

#### app/(application)/blogs/[blogId]/layout.js

**Purpose:** Layout wrapper for single blog pages

- Shared structure for all blog detail pages
- Adds "This is the single blog layout page" text
- Nested layout pattern

#### app/(application)/blogs/[blogId]/error.js

**Purpose:** Error boundary for individual blog pages

- Most specific error handler
- Uses `startTransition` and `router.refresh()`
- Custom message: "This is main BlodId error file running"

#### app/(application)/blogs/[blogId]/not-found.js

**Purpose:** Custom 404 page for invalid blog IDs

- More specific than root not-found
- Shows: "Blog not found"
- Triggered when blog ID is invalid format

---

### ğŸ“ app/(application)/blogs/[blogId]/comments/

#### app/(application)/blogs/[blogId]/comments/page.jsx

**Notation:** Route: `/blogs/:blogId/comments`
**Purpose:** Nested route for blog comments

- Accesses parent `blogId` parameter
- Example: `/blogs/3/comments`
- Shows comments for specific blog

**Parameter Access:**

```javascript
async function comments({ params }) {
  let { blogId } = await params;
  return <div>comments of {blogId}</div>;
}
```

---

## ğŸ“ app/(marketing)/ - Marketing Section

### app/(marketing)/layout.js

**Purpose:** Shared layout for marketing routes

- **Different header/footer than application section**
- Wraps `/services` and `/files` routes
- Shows "Marketing" themed header/footer
- Demonstrates route group isolation

---

### ğŸ“ app/(marketing)/services/

#### app/(marketing)/services/page.jsx

**Notation:** Route: `/services`
**Purpose:** Services listing page

- Links to nested service pages:
  - `/services/web-dev`
  - `/services/app-dev`
  - `/services/design`
  - `/services/seo`

#### app/(marketing)/services/layout.js

**Purpose:** Nested layout for services section

- Additional wrapper for all service pages
- Adds "Services layout" text
- **Triple nesting:**
  - Root Layout â†’ Marketing Layout â†’ Services Layout â†’ Page

---

### ğŸ“ app/(marketing)/services/web-dev/

#### app/(marketing)/services/web-dev/page.js

**Notation:** Route: `/services/web-dev`
**Purpose:** Web development service page

- Static nested route
- Simple page demonstrating nested routing

---

### ğŸ“ app/(marketing)/files/[[...catchAll]]/ - Catch-All Route

**Notation:** `[[...folderName]]` - Optional Catch-All Segment
**Purpose:** Matches any number of URL segments

- **Double brackets `[[...]]`** - Optional (matches parent too)
- **Single brackets `[...]`** - Required (doesn't match parent)

**Matches:**

- `/files` (because it's optional)
- `/files/a`
- `/files/a/b`
- `/files/a/b/c/d/e`

#### app/(marketing)/files/[[...catchAll]]/page.js

**Purpose:** Handles all file paths dynamically

**Parameter Structure:**

```javascript
// URL: /files/docs/2023/report
// params.catchAll = ["docs", "2023", "report"]

// URL: /files
// params.catchAll = undefined (optional)
```

**Implementation:**

```javascript
export default async function CatchAll({ params }) {
  const { catchAll } = await params;
  return <div>CatchAll : {catchAll?.join("/")}</div>;
}
```

---

## ğŸ“ Components/ Directory

**Purpose:** Reusable React components (not routes)
**Location:** Outside `app/` directory for organization

### Components/Header.js

**Purpose:** Navigation header component

- **Client Component** (`"use client"`) for interactivity
- Uses `usePathname()` for active link highlighting
- Theme toggle integration with context
- Active link styling

**Hooks Used:**

- `usePathname()` - Get current route
- `useTheme()` - Custom hook from ThemeContext

### Components/Button.jsx

**Purpose:** Interactive button with counter

- Client Component with `useState`
- Demonstrates client-side state
- Reusable across application
- Props: `title`

### Components/Likes.js

**Purpose:** Server Component wrapping client Button

- **Async Server Component**
- Shows Server + Client component composition
- Demonstrates React Server Components pattern

**Pattern:**

```
Server Component (Likes)
  â””â”€â”€ Client Component (Button)
```

### Components/Views.js

**Purpose:** Async Server Component with delay

- Simulates slow data fetching (6 second delay)
- Used with Suspense for streaming
- Demonstrates loading states

**Implementation:**

```javascript
await new Promise((resolve) => setTimeout(resolve, 6000));
```

### Components/Todos.jsx

**Purpose:** Fetches and displays todos

- Server Component with data fetching
- Fetches from JSONPlaceholder API
- Demonstrates React Server Components
- No client-side JavaScript needed

### Components/SunIcon.js

**Purpose:** SVG icon component for light mode

- Pure presentational component
- Feather icon design
- Used in theme toggle

### Components/MoonIcon.js

**Purpose:** SVG icon component for dark mode

- Pure presentational component
- Feather icon design
- Used in theme toggle

---

## ğŸ“ Context/ Directory

### Context/ThemeContext.js

**Purpose:** React Context for theme management

- **Client Component** (`"use client"`)
- Manages dark/light mode state
- Persists theme in localStorage
- Provides `useTheme()` hook

**Features:**

1. **State Management:**

```javascript
const [isDark, setIsDark] = useState(false);
```

2. **Persistence:**

```javascript
useEffect(() => {
  setIsDark(localStorage.getItem("isDark") === "true");
}, []);
```

3. **DOM Manipulation:**

```javascript
if (isDark) {
  document.documentElement.classList.add("dark");
}
```

4. **Custom Hook:**

```javascript
export const useTheme = () => {
  return useContext(ThemeContext);
};
```

---

## ğŸš€ Production Readiness Assessment: Todo Application

Your Todo application is a great start and follows modern Next.js patterns (App Router, Server Components, Route Groups). However, to make it "Production Level," several improvements are needed in terms of security, performance, and robustness.

### 1. Database & Environment Security
*   **Move Hardcoded Secrets:** Your MongoDB URL is currently hardcoded in `lib/connectDb.js`. In production, this **must** be an environment variable.
    *   *Action:* Move `mongodb://localhost:27017/TodoApp` to `.env` as `MONGODB_URI`.
*   **Connection Management:** Ensure you use a connection caching pattern to avoid "too many connections" errors during hot-reloading in development.

### 2. API Robustness (Backend)
*   **Input Validation:** Your POST and PUT routes accept data directly from `request.json()`.
    *   *Suggestion:* Use a library like **Zod** or **Joi** to validate that `title` is a string, not empty, and within character limits before touching the database.
*   **Global Error Handling:** Add `try-catch` blocks to all API routes to return clean 500 errors instead of crashing the process.
*   **Authentication:** Currently, anyone can access your API. In a real app, you'd need **NextAuth.js** or **Clerk** to protect these routes.

### 3. Modern Next.js Patterns (Frontend)
*   **Server Actions:** Instead of using `fetch` + `router.refresh()` in `AddTodo.jsx`, use **Server Actions**. This simplifies form handling and reduces client-side code.
*   **Optimistic Updates:** Use the `useOptimistic` hook. This makes the UI feel instant by updating the list before the server responds.
*   **Loading States:** While you use `Suspense` for the list, consider adding skeleton loaders or localized loading spinners for the "Add," "Delete," and "Toggle" actions.

### 4. Data Modeling
*   **Timestamps:** Add `{ timestamps: true }` to your Mongoose schema. This helps in tracking when todos were created or last updated, which is essential for sorting and auditing.

### 5. Performance & SEO
*   **Metadata:** Add a `generateMetadata` function or a static `metadata` object to `app/todos/page.jsx` for SEO.
*   **Caching Strategy:** You are using `cache: "no-store"` in `TodoList.jsx`. For production, consider using `revalidate` or tags for more efficient caching.

### ğŸ› ï¸ Recommended Tech Stack Upgrades
1.  **Zod:** For schema validation (frontend & backend).
2.  **NextAuth.js:** For secure authentication.
3.  **Lucide React:** For consistent production-quality icons.
4.  **React Hook Form:** For more complex forms (though not strictly needed for a single input).

### ğŸ“ Summary of Current Trace
*   **Models:** Defined in `models/todoModel.js`.
*   **Database:** Configured in `lib/connectDb.js`.
*   **API:** Located in `app/(Apis)/api/todos/` (includes dynamic routes).
*   **UI Components:** Modularized in `Components/TodoPage/`.
*   **Page:** Server-rendered at `app/todos/page.jsx`.

---

## ğŸ“Œ Next.js File Naming Conventions

### Reserved File Names (Special Behavior)

| File Name             | Purpose                 | Must Be | Required Props           |
| --------------------- | ----------------------- | ------- | ------------------------ |
| `layout.js/jsx`       | Shared UI wrapper       | Any     | `children`               |
| `page.js/jsx`         | Route endpoint          | Any     | `params`, `searchParams` |
| `error.js/jsx`        | Error boundary          | Client  | `error`, `reset`         |
| `not-found.js/jsx`    | 404 page                | Any     | None                     |
| `loading.js/jsx`      | Loading UI              | Any     | None                     |
| `global-error.js/jsx` | Root error handler      | Client  | `error`, `reset`         |
| `route.js`            | API route handler       | Any     | `request`                |
| `template.js/jsx`     | Re-rendered layout      | Any     | `children`               |
| `default.js/jsx`      | Parallel route fallback | Any     | None                     |
| `middleware.js`       | Middleware function     | Any     | `request`                |

### Route Segment Conventions

| Notation         | Example            | Purpose                   | URL Example              |
| ---------------- | ------------------ | ------------------------- | ------------------------ |
| `folder/`        | `about/`           | Static route segment      | `/about`                 |
| `[folder]/`      | `[blogId]/`        | Dynamic segment           | `/blogs/123`             |
| `[...folder]/`   | `[...slug]/`       | Catch-all segment         | `/docs/a/b/c`            |
| `[[...folder]]/` | `[[...catchAll]]/` | Optional catch-all        | `/files` or `/files/a/b` |
| `(folder)/`      | `(application)/`   | Route group (no URL)      | Not in URL               |
| `@folder/`       | `@modal/`          | Parallel route            | Not in URL               |
| `_folder/`       | `_components/`     | Private folder (excluded) | Not accessible           |

### Dynamic Route Patterns

**1. Single Dynamic Segment:**

```
app/blogs/[id]/page.js
â†’ /blogs/1
â†’ /blogs/hello
â†’ /blogs/anything
```

**2. Catch-All (Required):**

```
app/docs/[...slug]/page.js
â†’ /docs/a
â†’ /docs/a/b
â†’ /docs/a/b/c
âœ— /docs (404)
```

**3. Optional Catch-All:**

```
app/files/[[...path]]/page.js
â†’ /files (matches!)
â†’ /files/a
â†’ /files/a/b/c
```

**4. Multiple Dynamic Segments:**

```
app/[category]/[product]/page.js
â†’ /electronics/laptop
â†’ /clothing/shirt
```

---

## ğŸ“Š Metadata Export Options

### 1. Static Metadata

```javascript
export const metadata = {
  title: "Page Title",
  description: "Page description",
  keywords: ["next.js", "react"],
  authors: [{ name: "Author Name" }],
  openGraph: {
    title: "OG Title",
    description: "OG Description",
    images: ["/og-image.jpg"],
  },
}
```

### 2. Dynamic Metadata

```javascript
export async function generateMetadata({ params, searchParams }) {
  const id = params.id;
  const product = await fetch(`/api/products/${id}`).then(r => r.json());
  
  return {
    title: product.title,
    description: product.description,
  }
}
```

### 3. Static Generation

```javascript
export async function generateStaticParams() {
  const posts = await fetch('/api/posts').then(r => r.json());
  
  return posts.map((post) => ({
    id: post.id.toString(),
  }))
}
```

### 4. Revalidation & Caching

```javascript
// Incremental Static Regeneration (ISR)
export const revalidate = 60; // Revalidate every 60 seconds

// Dynamic Rendering Control
export const dynamic = 'force-static'; // or 'force-dynamic', 'auto'
export const dynamicParams = true; // Allow dynamic params beyond generateStaticParams

// Fetch Caching
export const fetchCache = 'default-cache'; // or 'force-cache', 'no-store'

// Runtime
export const runtime = 'nodejs'; // or 'edge'
```

---

## ğŸ¯ Key Architecture Patterns

### 1. Server Components by Default

- Components are server-rendered unless marked with `"use client"`
- Benefits:
  - Smaller bundle sizes
  - Direct database access
  - Better SEO
  - Improved security

### 2. File-Based Routing

- Folder structure defines URL structure
- No need for route configuration
- Intuitive and maintainable

### 3. Layout Nesting

- Layouts wrap child layouts/pages hierarchically
- Shared UI across routes
- Persistent state between navigations

**Example Hierarchy:**

```
Root Layout (always rendered)
  â”œâ”€â”€ (application) Layout
  â”‚   â”œâ”€â”€ About Page
  â”‚   â””â”€â”€ Blogs Layout
  â”‚       â””â”€â”€ [blogId] Layout
  â”‚           â””â”€â”€ Blog Page
  â””â”€â”€ (marketing) Layout
      â””â”€â”€ Services Layout
          â””â”€â”€ Service Page
```

### 4. Error Boundaries

- Granular error handling per route
- Closest error boundary catches the error
- Fallback UI without full page crash

**Error Boundary Hierarchy:**

```
global-error.js (catches root layout errors)
  â””â”€â”€ error.js (catches page/layout errors)
      â””â”€â”€ [blogId]/error.js (catches blog-specific errors)
```

### 5. Streaming with Suspense

- Progressive rendering of async components
- Show loading states while fetching
- Better perceived performance

**Pattern:**

```javascript
<Suspense fallback={<Loading />}>
  <AsyncServerComponent />
</Suspense>
```

### 6. Route Groups

- Organize without affecting URLs
- Multiple root layouts
- Logical separation

**Use Cases:**

- Separate admin and user sections
- Different authentication layouts
- A/B testing different designs

### 7. Dynamic Routes

- Parameter-based pages with `[param]`
- Type-safe with TypeScript
- Static generation with `generateStaticParams()`

### 8. Catch-All Routes

- Handle multiple path segments with `[...slug]`
- Optional with `[[...slug]]`
- Build dynamic documentation or file browsers

---

## ğŸš€ Advanced Patterns Demonstrated

### 1. Incremental Static Regeneration (ISR)

```javascript
// Regenerate page every 5 seconds
export const revalidate = 5;

// Or per-fetch
fetch('https://api.example.com/data', {
  next: { revalidate: 10 }
})
```

### 2. Server + Client Composition

```javascript
// Server Component (default)
export default async function ServerComponent() {
  const data = await fetchData();
  
  return (
    <div>
      <h1>{data.title}</h1>
      {/* Client Component for interactivity */}
      <ClientButton />
    </div>
  );
}
```

### 3. Progressive Enhancement

- Server-rendered HTML sent first
- JavaScript hydrates for interactivity
- Works without JavaScript for core content

### 4. Streaming UI

```javascript
// Multiple Suspense boundaries
<Suspense fallback={<HeaderSkeleton />}>
  <Header />
</Suspense>

<Suspense fallback={<ContentSkeleton />}>
  <Content />
</Suspense>

<Suspense fallback={<SidebarSkeleton />}>
  <Sidebar />
</Suspense>
```

### 5. Error Recovery

```javascript
"use client"

export default function Error({ error, reset }) {
  return (
    <div>
      <h2>Something went wrong!</h2>
      <button onClick={() => reset()}>Try again</button>
      <button onClick={() => router.refresh()}>Refresh</button>
    </div>
  )
}
```

---

## ğŸ“ Component Type Cheatsheet

### Server Components (Default)

âœ… Can access server-side resources (databases, file system)
âœ… Can use async/await directly
âœ… Smaller bundle size
âœ… Better SEO
âŒ No hooks (useState, useEffect, etc.)
âŒ No browser APIs
âŒ No event handlers

### Client Components (`"use client"`)

âœ… Can use hooks (useState, useEffect, etc.)
âœ… Can use browser APIs
âœ… Event handlers (onClick, onChange, etc.)
âœ… Can use Context
âŒ Larger bundle size
âŒ Cannot directly access server resources

### When to Use Client Components

- Need interactivity (clicks, form inputs)
- Need hooks (state, effects, refs)
- Need browser APIs (localStorage, window)
- Need event listeners
- Need Context (can also use Server Context)

---

## ğŸ¨ Styling Approaches Used

### 1. Global CSS

```javascript
// app/layout.js
import "./globals.css";
```

- Applies to entire application
- CSS variables for theming

### 2. CSS Modules

```javascript
import styles from "./page.module.css";

<div className={styles.container}>
```

- Scoped to component
- Avoids naming conflicts

### 3. Tailwind CSS

```javascript
<div className="flex items-center justify-between p-4">
```

- Utility-first CSS
- Configured with PostCSS

### 4. Inline Styles

```javascript
<header style={{ background: "red" }}>
```

- Dynamic styling
- Component-specific

---

## ğŸ”§ Configuration Files Deep Dive

### jsconfig.json

**Purpose:** JavaScript project configuration

```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./*"]  // Absolute imports
    }
  }
}
```

**Benefits:**

- Clean imports: `@/Components/Header` instead of `../../../Components/Header`
- IDE autocomplete
- Easier refactoring

### next.config.mjs

**Common Configurations:**

```javascript
const nextConfig = {
  // React Compiler (experimental)
  reactCompiler: true,
  
  // Images
  images: {
    domains: ['example.com'],
    formats: ['image/avif', 'image/webp'],
  },
  
  // Redirects
  async redirects() {
    return [
      {
        source: '/old-path',
        destination: '/new-path',
        permanent: true,
      },
    ]
  },
  
  // Environment variables
  env: {
    CUSTOM_KEY: 'value',
  },
  
  // Webpack customization
  webpack: (config) => {
    // Custom webpack config
    return config;
  },
}
```

### postcss.config.mjs

**Purpose:** PostCSS transformations

```javascript
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
    "autoprefixer": {},
  },
};
```

---

## ğŸ“š Best Practices Demonstrated

### 1. Component Organization

```
âœ… Components/ - Reusable components
âœ… Context/ - Global state
âœ… app/ - Routes and pages
```

### 2. File Naming

```
âœ… PascalCase for components: Header.js, Button.jsx
âœ… lowercase for routes: page.js, layout.js
âœ… Descriptive names: ThemeContext.js, not context.js
```

### 3. Server-First Approach

- Default to Server Components
- Add `"use client"` only when needed
- Minimize client-side JavaScript

### 4. Error Handling

- Global error boundary (global-error.js)
- Route-specific error boundaries
- Custom 404 pages

### 5. Loading States

- Use Suspense for async components
- Provide meaningful loading fallbacks
- Stream content progressively

### 6. Metadata Management

- Set metadata in layouts and pages
- Use dynamic metadata for SEO
- Template for consistent titles

### 7. Code Splitting

- Automatic with Next.js
- Route-based splitting
- Component-level with dynamic imports

---

## ğŸ› ï¸ Development Workflow

### 1. Start Development Server

```bash
npm run dev
# Server runs on http://localhost:3000
```

### 2. Build for Production

```bash
npm run build
# Creates optimized production build
# Generates .next/ directory
```

### 3. Start Production Server

```bash
npm start
# Runs production build
```

### 4. Logging to File

```bash
npm start >> server.log 2>&1
# Redirect stdout and stderr to server.log
```

---

## ğŸ“ Learning Path

### Beginner Concepts

1. File-based routing
2. Pages and layouts
3. Links and navigation
4. Static assets

### Intermediate Concepts

5. Dynamic routes
6. Data fetching
7. Server and Client Components
8. Error handling
9. Loading states

### Advanced Concepts

10. Streaming and Suspense
11. Parallel routes
12. Intercepting routes
13. Route handlers (API routes)
14. Middleware
15. Incremental Static Regeneration
16. React Server Actions

---

## ğŸ“– Quick Reference

### Creating Routes

```bash
# Static route
app/about/page.js â†’ /about

# Dynamic route
app/blog/[id]/page.js â†’ /blog/123

# Nested route
app/blog/[id]/comments/page.js â†’ /blog/123/comments

# Catch-all
app/docs/[...slug]/page.js â†’ /docs/a/b/c

# Optional catch-all
app/shop/[[...slug]]/page.js â†’ /shop OR /shop/a/b

# Route group (no URL impact)
app/(admin)/dashboard/page.js â†’ /dashboard
```

### Component Patterns

```javascript
// Server Component (default)
export default async function Page() {
  const data = await fetch('...');
  return <div>{data.title}</div>;
}

// Client Component
"use client"
export default function Interactive() {
  const [state, setState] = useState(0);
  return <button onClick={() => setState(s => s + 1)}>{state}</button>;
}

// Layout
export default function Layout({ children }) {
  return (
    <div>
      <Header />
      {children}
      <Footer />
    </div>
  );
}

// Error Boundary
"use client"
export default function Error({ error, reset }) {
  return <div>Error: {error.message} <button onClick={reset}>Retry</button></div>;
}
```

---

## ğŸ‰ Summary

This Next.js project demonstrates:

- **Modern App Router** (Next.js 13+)
- **Server Components** for performance
- **File-based routing** for simplicity
- **Route groups** for organization
- **Dynamic routes** with ISR
- **Error boundaries** for resilience
- **Suspense streaming** for UX
- **Theme management** with Context
- **Tailwind CSS** for styling
- **React Compiler** for optimization

The architecture follows Next.js best practices and showcases advanced patterns for building production-ready applications.
